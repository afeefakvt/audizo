<!DOCTYPE HTML>
<html>

<head>
	<title>audizo</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,600,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Rokkitt:100,300,400,700" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">



	<!-- Animate.css -->
	<link rel="stylesheet" href="/static/userImages/css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="/static/userImages/css/icomoon.css">
	<!-- Ion Icon Fonts-->
	<link rel="stylesheet" href="/static/userImages/css/ionicons.min.css">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="/static/userImages/css/bootstrap.min.css">

	<!-- Magnific Popup -->
	<link rel="stylesheet" href="/static/userImages/css/magnific-popup.css">

	<!-- Flexslider  -->
	<link rel="stylesheet" href="/static/userImages/css/flexslider.css">

	<!-- Owl Carousel -->
	<link rel="stylesheet" href="/static/userImages/css/owl.carousel.min.css">
	<link rel="stylesheet" href="/static/userImages/css/owl.theme.default.min.css">

	<!-- Date Picker -->
	<link rel="stylesheet" href="/static/userImages/css/bootstrap-datepicker.css">
	<!-- Flaticons  -->
	<link rel="stylesheet" href="/static/userImages/fonts/flaticon/font/flaticon.css">

	<!-- Theme style  -->
	<link rel="stylesheet" href="/static/userImages/css/style.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">



</head>

<body>

	<div class="colorlib-loader"></div>

	<div id="page">
		<nav class="colorlib-nav" role="navigation">
			<div class="top-menu">
				<div class="container">
					<div class="row">
						<div class="col-sm-7 col-md-9">
							<div id="colorlib-logo"><a href="/">AUDIZO.</a></div>
						</div>
						<div class="col-sm-5 col-md-3">

						</div>
					</div>
					<div class="row">
						<div class="col-sm-12 text-left menu-1">
							<ul>
								<li class="active"><a href="/">Home</a></li>
								<li class="has-dropdown">
									<a href="/shop">Shop</a>
									<ul class="dropdown">
										<li><a href="/shop">Shop Products</a></li>
										<li><a href="/cart">Shopping Cart</a></li>
										<!-- <li><a href="checkout.html">Checkout</a></li>
										<li><a href="order-complete.html">Order Complete</a></li> -->
										<li><a href="/wishlist">Wishlist</a></li>
									</ul>
								</li>
								<!-- <li><a href="women.html">Women</a></li> -->
								<li><a href="/about">About</a></li>
								<!-- <li><a href="contact.html">Contact</a></li> -->
								<li class="cart"><a href="cart.html"><i class="icon-shopping-cart"></i>cart</a></li>
								<li class="cart"><a href="/wishlist"><i class="icon-heart"></i>wishlist</a></li>
								<li class="cart"><a href="/profile"><i class="icon-user"></i>
										<%= user.name %>
									</a></li>

							</ul>
						</div>
					</div>
				</div>
			</div>
			<div class="sale">
				<div class="container">
					<div class="row">
						<div class="col-sm-8 offset-sm-2 text-center">
							<div class="row">
								<div class="owl-carousel2">

								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</nav>
		<div class="breadcrumbs">
			<div class="container">
				<div class="row">
					<div class="col">
						<p class="bread"><span><a href="/">Home</a></span> / <span> <a
									href="/profile">profile</a></span> / <span>change password</span></p>
					</div>
				</div>
			</div>
		</div>
		<div id="colorlib-contact">
			<div class="container">
				<div class="row justify-content-center">
					<div class="col-md-6">
						<div class="contact-wrap">
							<h3>Change Password</h3>
							<form id="changePasswordForm" action="/profile/changePassword" method="POST"
								class="contact-form">
								<div class="row">
									<div class="col-md-12">
										<div class="form-group">
											<label for="oldPassword">Old Password</label>
											<input type="password" id="oldPassword" name="oldPassword"
												class="form-control" placeholder="Your old password" required>
											<div id="oldPasswordError" class="text-danger"></div>
										</div>
									</div>
									<div class="col-md-12">
										<div class="form-group">
											<label for="newPassword">New Password</label>
											<div class="input-group">
												<input type="password" id="newPassword" name="newPassword"
													class="form-control" placeholder="Your new password" required>
												<div class="input-group-append">
													<button class="btn btn-secondary" type="button"
														id="toggleNewPassword" style="height: 37px;">
														<i class="fas fa-eye-slash" id="eyeIconNewPassword"></i>
													</button>
												</div>
											</div>
											<div id="newPasswordError" class="text-danger"></div>
										</div>
									</div>

									<div class="col-md-12">
										<div class="form-group">
											<label for="confirmPassword">Confirm New Password</label>
											<div class="input-group">
												<input type="password" id="confirmPassword" name="confirmPassword"
													class="form-control" placeholder="Confirm your new password"
													required>
												<div class="input-group-append">
													<button class="btn btn-secondary" type="button"
														id="toggleConfirmPassword" style="height: 37px;">
														<i class="fas fa-eye-slash" id="eyeIconConfirmPassword"></i>
													</button>
												</div>
											</div>
											<div id="confirmPasswordError" class="text-danger"></div>
										</div>
									</div>
									<div class="w-100"></div>
									<div class="col-sm-12">
										<div class="form-group">
											<input type="submit" value="Change Password" class="btn btn-primary">
										</div>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>


		<footer id="colorlib-footer" role="contentinfo">
			<div class="container">
				<div class="row row-pb-md">
					<div class="col footer-col colorlib-widget">
						<h4>About audizo</h4>
						<p> Weâ€™re dedicated to
							giving you the very best audio experience, with a focus on innovation, quality, and
							customer satisfaction.</p>
						<!-- <p>
						<ul class="colorlib-social-icons">
							<li><a href="#"><i class="icon-twitter"></i></a></li>
							<li><a href="#"><i class="icon-facebook"></i></a></li>
							<li><a href="#"><i class="icon-linkedin"></i></a></li>
							<li><a href="#"><i class="icon-dribbble"></i></a></li>
						</ul>
						</p> -->
					</div>
					<div class="col footer-col colorlib-widget">
						<h4>Customer Care</h4>
						<p>
						<ul class="colorlib-footer-links">
							<li><a href="/about">Contact</a></li>
							<li><a href="/myOrders">Returns/Exchange</a></li>
							<li><a href="/cart">Gift Voucher</a></li>
							<li><a href="/wishlist">Wishlist</a></li>
							<li><a href="#">Special</a></li>
							<li><a href="/about">Customer Services</a></li>
						</ul>
						</p>
					</div>
					<div class="col footer-col colorlib-widget">
						<h4>Information</h4>
						<p>
						<ul class="colorlib-footer-links">
							<li><a href="/about">About us</a></li>
							<li><a href="/myOrders">Delivery Information</a></li>
							<li><a href="/about">Privacy Policy</a></li>
							<li><a href="/about">Support</a></li>
							<li><a href="myOrders">Order Tracking</a></li>
						</ul>
						</p>
					</div>

					<div class="col footer-col">
						<h4>News</h4>
						<ul class="colorlib-footer-links">
							<li><a href="blog.html">Blog</a></li>
							<li><a href="#">Press</a></li>
							<li><a href="#">Exhibitions</a></li>
						</ul>
					</div>

					<div class="col footer-col">
						<h4>Contact Information</h4>
						<ul class="colorlib-footer-links">
							<li>291 South 21th Street, <br>Koramangala,Banglore</li>
							<li><a href="zoaudi866@gmail.com">zoaudi866@gmail.com</a></li>

						</ul>
					</div>
				</div>
			</div>
			<div class="copy">
				<div class="row">
					<div class="col-sm-12 text-center">
						<p>
							<span><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
								Copyright &copy;
								<script>document.write(new Date().getFullYear());</script> AUDIZO
							</span>

						</p>
					</div>
				</div>
			</div>
		</footer>
	</div>

	<div class="gototop js-top">
		<a href="#" class="js-gotop"><i class="ion-ios-arrow-up"></i></a>
	</div>
	<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
	<script>
		document.getElementById('changePasswordForm').addEventListener('submit', async function (event) {
			event.preventDefault();

			const oldPassword = document.getElementById('oldPassword').value;
			const newPassword = document.getElementById('newPassword').value;
			const confirmPassword = document.getElementById('confirmPassword').value;
			const oldPasswordError = document.getElementById('oldPasswordError');
			const newPasswordError = document.getElementById('newPasswordError');
			const confirmPasswordError = document.getElementById('confirmPasswordError');
			let isValid = true;

			// Clear previous errors
			oldPasswordError.innerHTML = '';
			newPasswordError.innerHTML = '';
			confirmPasswordError.innerHTML = '';

			if (oldPassword === newPassword) {
				newPasswordError.innerHTML = 'New password must be different from old password.';
				isValid = false;
			}

			if (newPassword !== confirmPassword) {
				confirmPasswordError.innerHTML = 'New password and confirm password do not match.';
				isValid = false;
			}

			if (!/^(?![.\s])(?=.*[!@#$%^&*(),.?":{}|<>]).{5,}$/.test(newPassword)) {
				newPasswordError.innerHTML = 'New password should be at least 5 characters long, cannot start with a dot or a space, and must include at least one special character.';
				isValid = false;
			}

			if (isValid) {
				try {
					const response = await axios.post('/profile/changePassword', {
						oldPassword: oldPassword,
						newPassword: newPassword
					});

					if (response.data.success) {
						location.href = '/profile';
					} else {
						if (response.data.message === 'Incorrect old password') {
							oldPasswordError.innerHTML = response.data.message;
						} else {
							oldPasswordError.innerHTML = response.data.message;
						}
					}
				} catch (error) {
					console.error(error);
					oldPasswordError.innerHTML = 'error';
				}
			}
		});
		document.getElementById('toggleNewPassword').addEventListener('click', function () {
			const newPasswordInput = document.getElementById('newPassword');
			const eyeIconNewPassword = document.getElementById('eyeIconNewPassword');

			if (newPasswordInput.type === 'password') {
				newPasswordInput.type = 'text';
				eyeIconNewPassword.classList.remove('fa-eye-slash');
				eyeIconNewPassword.classList.add('fa-eye');
			} else {
				newPasswordInput.type = 'password';
				eyeIconNewPassword.classList.remove('fa-eye');
				eyeIconNewPassword.classList.add('fa-eye-slash');
			}
		});

		document.getElementById('toggleConfirmPassword').addEventListener('click', function () {
			const confirmPasswordInput = document.getElementById('confirmPassword');
			const eyeIconConfirmPassword = document.getElementById('eyeIconConfirmPassword');

			if (confirmPasswordInput.type === 'password') {
				confirmPasswordInput.type = 'text';
				eyeIconConfirmPassword.classList.remove('fa-eye-slash');
				eyeIconConfirmPassword.classList.add('fa-eye');
			} else {
				confirmPasswordInput.type = 'password';
				eyeIconConfirmPassword.classList.remove('fa-eye');
				eyeIconConfirmPassword.classList.add('fa-eye-slash');
			}
		});
	</script>
	<!-- jQuery -->
	<script src="/static/userImages/js/jquery.min.js"></script>
	<!-- popper -->
	<script src="/static/userImages/js/popper.min.js"></script>
	<!-- bootstrap 4.1 -->
	<script src="/static/userImages/js/bootstrap.min.js"></script>
	<!-- jQuery easing -->
	<script src="/static/userImages/js/jquery.easing.1.3.js"></script>
	<!-- Waypoints -->
	<script src="/static/userImages/js/jquery.waypoints.min.js"></script>
	<!-- Flexslider -->
	<script src="/static/userImages/js/jquery.flexslider-min.js"></script>
	<!-- Owl carousel -->
	<script src="/static/userImages/js/owl.carousel.min.js"></script>
	<!-- Magnific Popup -->
	<script src="/static/userImages/js/jquery.magnific-popup.min.js"></script>
	<script src="/static/userImages/js/magnific-popup-options.js"></script>
	<!-- Date Picker -->
	<script src="/static/userImages/js/bootstrap-datepicker.js"></script>
	<!-- Stellar Parallax -->
	<script src="/static/userImages/js/jquery.stellar.min.js"></script>
	<!-- Main -->
	<script src="/static/userImages/js/main.js"></script>

</body>

</html>