<!DOCTYPE HTML>
<html>

<head>
	<title>audizo</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,600,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Rokkitt:100,300,400,700" rel="stylesheet">

	<!-- Animate.css -->
	<link rel="stylesheet" href="/static/userImages/css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="/static/userImages/css/icomoon.css">
	<!-- Ion Icon Fonts-->
	<link rel="stylesheet" href="/static/userImages/css/ionicons.min.css">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="/static/userImages/css/bootstrap.min.css">

	<!-- Magnific Popup -->
	<link rel="stylesheet" href="/static/userImages/css/magnific-popup.css">

	<!-- Flexslider  -->
	<link rel="stylesheet" href="/static/userImages/css/flexslider.css">

	<!-- Owl Carousel -->
	<link rel="stylesheet" href="/static/userImages/css/owl.carousel.min.css">
	<link rel="stylesheet" href="/static/userImages/css/owl.theme.default.min.css">

	<!-- Date Picker -->
	<link rel="stylesheet" href="/static/userImages/css/bootstrap-datepicker.css">
	<!-- Flaticons  -->
	<link rel="stylesheet" href="/static/userImages/fonts/flaticon/font/flaticon.css">

	<!-- Theme style  -->
	<link rel="stylesheet" href="/static/userImages/css/style.css">

</head>

<body>

	<div class="colorlib-loader"></div>

	<div id="page">
		<nav class="colorlib-nav" role="navigation">
			<div class="top-menu">
				<div class="container">
					<div class="row">
						<div class="col-sm-7 col-md-9">
							<div id="colorlib-logo"><a href="#">AUDIZO.</a></div>
						</div>
						<div class="col-sm-5 col-md-3">
					
						</div>
					</div>
					<div class="row">
						<div class="col-sm-12 text-left menu-1">
							<ul>
								<li><a href="/">Home</a></li>
								<li class="has-dropdown active">
									<a href="/shop">Shop</a>
									<ul class="dropdown">
										<li><a href="/shop">Shop Products</a></li>
										<li><a href="/cart">Shopping Cart</a></li>
										<!-- <li><a href="checkout.html">Checkout</a></li>
										<li><a href="order-complete.html">Order Complete</a></li> -->
										<li><a href="/wishlist">Wishlist</a></li>
									</ul>
								</li>
								<!-- <li><a href="women.html">Women</a></li> -->
								<li><a href="/about">About</a></li>
								<!-- <li><a href="contact.html">Contact</a></li> -->
								<li class="cart"><a href="/cart"><i class="icon-shopping-cart"></i>cart </a></li>
								<li class="cart"><a href="/wishlist"><i class="icon-heart"></i>wishlist</a></li>
								<li class="cart"><a href="/profile"><i class="icon-user"></i>
										<%= user.name %>
									</a></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
			<div class="sale">
				<div class="container">
					<div class="row">
						<div class="col-sm-8 offset-sm-2 text-center">
							<div class="row">
								<div class="owl-carousel2">
									
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</nav>

		<div class="breadcrumbs">
			<div class="container">
				<div class="row">
					<div class="col">
						<p class="bread"><span><a href="/">Home</a></span> / <span>My Wishlist</span></p>
					</div>
				</div>
			</div>
		</div>


		<div class="colorlib-product">
			<div class="container">
				<div class="row row-pb-lg">
					<div class="col-md-12">
						<div class="product-name d-flex">
							<div class="one-forth text-left px-4">
								<span>Product Details</span>
							</div>
							<div class="one-eight text-center">
								<span>Price</span>
							</div>
							<div class="one-eight text-center px-4">
								<span>Remove</span>
							</div>
							<div class="one-eight text-center">
								<span></span>
							</div>
						</div>

						<% if(wishlist && wishlist.items && wishlist.items.length>0){%>
							<% wishlist.items.forEach((item,index)=>{%>
								<div class="product-cart d-flex">
									<div class="one-forth">
										<% if (item.productId && item.productId.images && item.productId.images.length > 0) { %>
										<div class="product-img"
											style="background-image: url('/static/userImages/images/<%= item.productId.images[0]%>');">
										</div>
										<%}%>
										<div class="display-tc">
											<h3>
												<%= item.productId ? item.productId.name : 'Unknown Product' %>
											</h3>
										</div>
									</div>
									<div class="one-eight text-center">
										<div class="display-tc">
											<% if (item.productId&&item.productId.discountPrice && item.productId.discountPrice <
												item.productId.price) { %>
												<span class="price">
													<span class="original-price"
														style="text-decoration: line-through; color: grey;">&#8377;<%=
															item.productId.price %></span>
													<span class="discount-price"
														style="color: red; margin-left: 5px;">&#8377;<%=
															item.productId.discountPrice %></span>
												</span>
												<% } else if (item.productId){ %>
													<span class="price">&#8377;<%= item.productId.price %></span>
													<% } %>
										</div>
									</div>
									<div class="one-eight text-center">
										<div class="display-tc">
											<button class="closed" onclick="removeFromWishlist('<%= index%>')"></button>
										</div>
									</div>
									<div class="one-eight text-center">
										<div class="display-tc">
											<% if(item.productId&& item.productId.stock>0){ %>
												<button type="button" class="btn btn-primary" style="padding: 3px;"
													onclick="addToCart('<%= item.productId._id%>')">Add to Cart</button>
												<%}else if(item.productId){%>
													<div class="text-danger font-weight-bold">Currently Unavailable
													</div>

													<%}%>
										</div>
									</div>
								</div>
								<%});%>
									<%}else{%>
										<p>your wishlist is empty</p>
										<%}%>

					</div>
				</div>

			</div>
		</div>

		<footer id="colorlib-footer" role="contentinfo" >
			<div class="container">
				<div class="row row-pb-md">
					<div class="col footer-col colorlib-widget">
						<h4 >About audizo</h4>
						<p> Weâ€™re dedicated to
							giving you the very best audio experience, with a focus on innovation, quality, and
							customer satisfaction.</p>
						<!-- <p>
						<ul class="colorlib-social-icons">
							<li><a href="#"><i class="icon-twitter"></i></a></li>
							<li><a href="#"><i class="icon-facebook"></i></a></li>
							<li><a href="#"><i class="icon-linkedin"></i></a></li>
							<li><a href="#"><i class="icon-dribbble"></i></a></li>
						</ul>
						</p> -->
					</div>
					<div class="col footer-col colorlib-widget" >
						<h4 >Customer Care</h4>
						<p>
						<ul class="colorlib-footer-links" >
							<li><a href="/about">Contact</a></li>
							<li><a href="/myOrders">Returns/Exchange</a></li>
							<li><a href="/cart">Gift Voucher</a></li>
							<li><a href="/wishlist">Wishlist</a></li>
							<li><a href="#">Special</a></li>
							<li><a href="/about">Customer Services</a></li>
						</ul>
						</p>
					</div>
					<div class="col footer-col colorlib-widget">
						<h4>Information</h4>
						<p>
						<ul class="colorlib-footer-links" >
							<li><a href="/about">About us</a></li>
							<li><a href="/myOrders">Delivery Information</a></li>
							<li><a href="/about">Privacy Policy</a></li>
							<li><a href="/about">Support</a></li>
							<li><a href="myOrders">Order Tracking</a></li>
						</ul>
						</p>
					</div>

					<div class="col footer-col">
						<h4>News</h4>
						<ul class="colorlib-footer-links">
							<li><a href="blog.html">Blog</a></li>
							<li><a href="#">Press</a></li>
							<li><a href="#">Exhibitions</a></li>
						</ul>
					</div>

					<div class="col footer-col">
						<h4>Contact Information</h4>
						<ul class="colorlib-footer-links">
							<li>291 South 21th Street, <br>Koramangala,Banglore</li>
							<li><a href="zoaudi866@gmail.com">zoaudi866@gmail.com</a></li>
							
						</ul>
					</div>
				</div>
			</div>
			<div class="copy">
				<div class="row">
					<div class="col-sm-12 text-center">
						<p>
							<span><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
								Copyright &copy;
								<script>document.write(new Date().getFullYear());</script> AUDIZO
							</span>
							
						</p>
					</div>
				</div>
			</div>
		</footer>
	</div>

	<div class="gototop js-top">
		<a href="#" class="js-gotop"><i class="ion-ios-arrow-up"></i></a>
	</div>

	<!-- jQuery -->
	<script src="/static/userImages/js/jquery.min.js"></script>
	<!-- popper -->
	<script src="/static/userImages/js/popper.min.js"></script>
	<!-- bootstrap 4.1 -->
	<script src="/static/userImages/js/bootstrap.min.js"></script>
	<!-- jQuery easing -->
	<script src="/static/userImages/js/jquery.easing.1.3.js"></script>
	<!-- Waypoints -->
	<script src="/static/userImages/js/jquery.waypoints.min.js"></script>
	<!-- Flexslider -->
	<script src="/static/userImages/js/jquery.flexslider-min.js"></script>
	<!-- Owl carousel -->
	<script src="/static/userImages/js/owl.carousel.min.js"></script>
	<!-- Magnific Popup -->
	<script src="/static/userImages/js/jquery.magnific-popup.min.js"></script>
	<script src="/static/userImages/js/magnific-popup-options.js"></script>
	<!-- Date Picker -->
	<script src="/static/userImages/js/bootstrap-datepicker.js"></script>
	<!-- Stellar Parallax -->
	<script src="/static/userImages/js/jquery.stellar.min.js"></script>
	<!-- Main -->
	<script src="/static/userImages/js/main.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

	<script>
		function removeFromWishlist(index) {
			console.log("ohohohohohhhhh")
			Swal.fire({
				title: "Are you Sure?",
				icon: "warning",
				showCancelButton: true,
				confirmButtonText: "Remove",
				cancelButtonText: "Cancel"
			}).then((result) => {
				if (result.isConfirmed) {
					fetch(`/removeFromWishlist?index=${index}`, {
						method: 'GET'
					})
						.then(response => response.json())
						.then(data => {
							if (data.success) {
								Swal.fire({
									title: "Removed",
									text: "Product removed from wishlist successfully",
									icon: "success",
									confirmButtonText: "Ok"
								}).then((result) => {
									if (result.isConfirmed) {
										location.reload(); // Reload the page to reflect changes
									}
								});
							} else {
								Swal.fire("Error", "Oops! Something went wrong", "error");
							}
						})
						.catch(error => {
							console.error('Error:', error);
							Swal.fire("Error", "Oops! Something went wrong", "error");
						});
				}
			}).catch(error => {
				console.error('Error:', error);
				Swal.fire("Error", "Oops! Something went wrong", "error");
			});
		}


	</script>
	<script>


		const addToCart = (productId) => {
			axios.post(`/addToCart?id=${productId}`)
				.then((response) => {
					if (response.data.success) {
						
						Swal.fire(
							"Success",
							"Product  added to cart successfully",
							"success"
						)
					} else {
						Swal.fire(
							"Info",
							"The product is already in the cart",
							"info"
						)
					}
				})
				.catch((error) => {
					Swal.fire(
						"Error!",
						"An error occurred while adding product to the cart.",
						"error"
					);
				})
		}
	</script>

</body>

</html>